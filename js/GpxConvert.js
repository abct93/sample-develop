(()=>{var e,t={807:function(e,t){var r,o,n,a,i,s,u,c,p;o=[],a=window,s={valueKey:"_",attrKey:"$",attrPrefix:"$",lowerCaseTags:!1,trueIsEmpty:!1,autoDate:!1,ignorePrefixedNodes:!1,parseValues:!1},u=[],c=/^\s*$/,p=/^(?:true|false)$/i,void 0===(n="function"==typeof(r=new function(){function e(e){return s.parseValues?c.test(e)?null:p.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):s.autoDate&&isFinite(Date.parse(e))?new Date(e):e:e}function t(){}function r(o,n,a,i){var c,p,l=u.length,f=o.hasChildNodes(),m=o.nodeType===o.ELEMENT_NODE&&o.hasAttributes(),g=Boolean(2&n),d=0,h="",y=g?{}:!!s.trueIsEmpty||"";if(f)for(var x,v=0;v<o.childNodes.length;v++)4===(x=o.childNodes.item(v)).nodeType?h+=x.nodeValue:3===x.nodeType?h+=x.nodeValue.trim():1!==x.nodeType||s.ignorePrefixedNodes&&x.prefix||u.push(x);var w,T=u.length,E=e(h);g||!f&&!m||(y=0===n?null===(w=E)?new t:w instanceof Object?w:new w.constructor(w):{});for(var P=l;P<T;P++)c=u[P].nodeName,s.lowerCaseTags&&(c=c.toLowerCase()),p=r(u[P],n,a,i),y.hasOwnProperty(c)?(y[c].constructor!==Array&&(y[c]=[y[c]]),y[c].push(p)):(y[c]=p,d++);if(m){for(var C,b,S=o.attributes.length,k=i?"":s.attrPrefix,D=i?{}:y,N=0;N<S;d++,N++)b=(C=o.attributes.item(N)).name,s.lowerCaseTags&&(b=b.toLowerCase()),D[k+b]=e(C.value.trim());i&&(a&&Object.freeze(D),y[s.attrKey]=D,d-=S-1)}return 3===n||(2===n||1===n&&d>0)&&h?y[s.valueKey]=E:!g&&0===d&&h&&(y=E),a&&(g||d>0)&&Object.freeze(y),u.length=l,y}function o(e,t,r){var n,a,i;if(r.constructor===String||r.constructor===Number||r.constructor===Boolean){if(t.appendChild(e.createTextNode(r.toString())),r===r.valueOf())return}else r.constructor===Date&&t.appendChild(e.createTextNode(r.toISOString()));for(var u in r)if(void 0!==(n=r[u])&&(null===n&&(n={}),!(isFinite(u)||n instanceof Function)))if(u===s.valueKey)null!==n&&!0!==n&&t.appendChild(e.createTextNode(n.constructor===Date?n.toISOString():String(n)));else if(u===s.attrKey)for(var c in n)t.setAttribute(c,n[c]);else if(u===s.attrPrefix+"xmlns");else if(u.charAt(0)===s.attrPrefix)t.setAttribute(u.slice(1),n);else if(n.constructor===Array)for(var p in n)n.hasOwnProperty(p)&&(a=(i=n[p]&&n[p][s.attrPrefix+"xmlns"]||t.namespaceURI)?e.createElementNS(i,u):e.createElement(u),o(e,a,n[p]||{}),t.appendChild(a));else a=(i=(n||{})[s.attrPrefix+"xmlns"]||t.namespaceURI)?e.createElementNS(i,u):e.createElement(u),n instanceof Object?o(e,a,n):null===n||!0===n&&s.trueIsEmpty||a.appendChild(e.createTextNode(n.toString())),t.appendChild(a)}this.config=function(e){for(var t in e)s[t]=e[t];s.parserErrorHandler&&(i=new a.DOMParser({errorHandler:s.parserErrorHandler,locator:{}}))},t.prototype.toString=function(){return"null"},t.prototype.valueOf=function(){return null},this.xmlToJs=this.build=function(e,t,o,n){var a=arguments.length>1&&"number"==typeof t?3&t:1;return r(e,a,o||!1,arguments.length>3?n:3===a)},this.jsToXml=this.unbuild=function(e,t,r,n){var i=(a.document&&a.document.implementation||new a.DOMImplementation).createDocument(t||null,r||"",n||null);return o(i,i.documentElement||i,e),i},this.stringToXml=function(e){return i||(i=new a.DOMParser),i.parseFromString(e,"application/xml")},this.xmlToString=function(e){return void 0!==e.xml?e.xml:(new a.XMLSerializer).serializeToString(e)},this.stringToJs=function(e){var t=this.stringToXml(e);return this.xmlToJs(t)},this.jsToString=this.stringify=function(e,t,r,o){return this.xmlToString(this.jsToXml(e,t,r,o))},this.each=function(e,t,r){e instanceof Array?e.forEach(t,r):[e].forEach(t,r)}})?r.apply(t,o):r)||(e.exports=n)},704:(e,t,r)=>{var n=r(807);n.config({attrPrefix:"@"}),e.exports=function(e,t){if("string"==typeof(t=function(e,t){for(var r in e)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}({creator:"togpx",metadata:void 0,featureTitle:function e(t){if(!t)return"";if("object"==typeof t.tags){var r=e(t.tags);if(""!==r)return r}return t.name?t.name:t.ref?t.ref:t.id?t.id:""},featureDescription:function e(t){if(!t)return"";if("object"==typeof t.tags)return e(t.tags);var r="";for(var o in t)"object"!=typeof t[o]&&(r+=o+"="+t[o]+"\n");return r.substr(0,r.length-1)},featureLink:void 0,featureCoordTimes:function(e){return e.properties&&(e.properties.times||e.properties.coordTimes)||null}},t||{})).featureCoordTimes){var r=t.featureCoordTimes;t.featureCoordTimes=function(e){return e.properties[r]}}function a(e,r){t.featureLink&&(e.link={"@href":t.featureLink(r.properties)})}var i={gpx:{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1",metadata:null,wpt:[],trk:[]}};return t.creator&&(i.gpx["@creator"]=t.creator),t.metadata?i.gpx.metadata=t.metadata:delete t.metadata,("FeatureCollection"===e.type?e.features:"Feature"===e.type?[e]:[{type:"Feature",properties:{},geometry:e}]).forEach((function e(r){switch(r.geometry.type){case"Point":case"MultiPoint":var n=r.geometry.coordinates;"Point"==r.geometry.type&&(n=[n]),n.forEach((function(e){o={"@lat":e[1],"@lon":e[0],name:t.featureTitle(r.properties),desc:t.featureDescription(r.properties)},void 0!==e[2]&&(o.ele=e[2]),a(o,r),i.gpx.wpt.push(o)}));break;case"LineString":case"MultiLineString":n=r.geometry.coordinates;var s=t.featureCoordTimes(r);"LineString"==r.geometry.type&&(n=[n]),o={name:t.featureTitle(r.properties),desc:t.featureDescription(r.properties)},a(o,r),o.trkseg=[],n.forEach((function(e){var t={trkpt:[]};e.forEach((function(e,r){var o={"@lat":e[1],"@lon":e[0]};void 0!==e[2]&&(o.ele=e[2]),s&&s[r]&&(o.time=s[r]),t.trkpt.push(o)})),o.trkseg.push(t)})),i.gpx.trk.push(o);break;case"Polygon":case"MultiPolygon":o={name:t.featureTitle(r.properties),desc:t.featureDescription(r.properties)},a(o,r),o.trkseg=[],n=r.geometry.coordinates,s=t.featureCoordTimes(r),"Polygon"==r.geometry.type&&(n=[n]),n.forEach((function(e){e.forEach((function(e){var t={trkpt:[]},r=0;e.forEach((function(e){var o={"@lat":e[1],"@lon":e[0]};void 0!==e[2]&&(o.ele=e[2]),s&&s[r]&&(o.time=s[r]),r++,t.trkpt.push(o)})),o.trkseg.push(t)}))})),i.gpx.trk.push(o);break;case"GeometryCollection":r.geometry.geometries.forEach((function(t){var o={properties:r.properties,geometry:t};e(o)}));break;default:console.log("warning: unsupported geometry type: "+r.geometry.type)}})),gpx_str=n.stringify(i),gpx_str}}},r={};e=function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{}};return t[o].call(n.exports,n,n.exports,e),n.exports}(704),onmessage=function(t){var r=t.data.type;if("geojson"===r){var o={};try{o.gpx=e(t.data.route),o.success=!0,o.type="gpx"}catch(e){o.success=!1,o.cause="Convert Error: ".concat(e)}postMessage(o)}else postMessage({success:!1,cause:"".concat(r," cannot convert.")})}})();
